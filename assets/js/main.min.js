/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./assets/css/phosphor.css":
/*!*********************************!*\
  !*** ./assets/css/phosphor.css ***!
  \*********************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ }),

/***/ "./assets/css/styles.css":
/*!*******************************!*\
  !*** ./assets/css/styles.css ***!
  \*******************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

__webpack_require__.r(__webpack_exports__);
// extracted by mini-css-extract-plugin


/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!***************************!*\
  !*** ./assets/js/main.js ***!
  \***************************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _css_phosphor_css__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../css/phosphor.css */ "./assets/css/phosphor.css");
/* harmony import */ var _css_styles_css__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../css/styles.css */ "./assets/css/styles.css");



/**
 * Para evitar uso de múltiplos eventListeners apenas um está sendo utilizado no container identificando o
 * parente do objeto clicado [nav|section] e executando as funcionalidades de acordo.
 */
document.querySelector("main").addEventListener("click", (event) => {
  if (event.target.closest("nav") && event.target.dataset?.type) {
    let parent = event.target?.nextElementSibling ?? event.target?.previousElementSibling;

    if (window.innerWidth > 1024 && !event.target?.hasAttribute("active")) toggleNavigationPanel(event.target, parent);
    if (window.innerWidth <= 1024) toggleNavigationPanel(parent, event.target);
  } else if (event.target.closest("section")?.id && event.target.dataset?.type) {
    let exec = event.target.closest("section").id === "timer" ? timerRoles : stopwatchRoles;
    let role = event.target.dataset.type;

    if (!role || typeof role !== "string") return;
    if (exec[role]) exec[role]();
  }
});

// Navigation

var navigation = localStorage.getItem("navigation") ?? "timer";

function toggleNavigationPanel(target, parent) {
  navigation = target.dataset.type;
  localStorage.setItem("navigation", navigation);

  resetDocumentTitle();

  target.toggleAttribute("active", true);
  parent.toggleAttribute("active", false);

  target.setAttribute("aria-expanded", true);
  parent.setAttribute("aria-expanded", false);

  document.querySelector(`.${target.dataset.type}`).toggleAttribute("active", true);
  document.querySelector(`.${parent.dataset.type}`).toggleAttribute("active", false);
}

function resetDocumentTitle() {
  document.title = "Oh My Timer";
}

function pushTimeToDocumentTitle(time) {
  document.title = `Oh My Timer - ${time[0]}:${time[1]}:${time[2]}`;
}

// Stopwatch

const stopwatchPanel = document.querySelector("#stopwatch");
const stopwatchDisplay = stopwatchPanel.querySelectorAll(".display span");

var stopwatchWorker, stopwatchStamp, stopwatchFreezeTime;

const stopwatchButtons = {
  play: stopwatchPanel.querySelector(".control .ph-play-fill"),
  pause: stopwatchPanel.querySelector(".control .ph-pause-fill"),
};

const stopwatchRoles = {
  play() {
    toggleStopwatchState("play");

    stopwatchStamp = !stopwatchStamp ? Date.now() : stopwatchStamp + Date.now() - stopwatchFreezeTime;

    stopwatchWorker = new Worker("./assets/js/stopwatch.js");
    stopwatchWorker.postMessage(stopwatchStamp);
    stopwatchWorker.onmessage = (message) => pushStopwatchToDisplay(message.data);
  },
  pause() {
    stopwatchWorker.terminate();

    stopwatchFreezeTime = Date.now();

    toggleStopwatchState("pause");
  },
  replay() {
    stopwatchWorker.terminate();

    stopwatchStamp = stopwatchFreezeTime = false;

    stopwatchDisplay[0].textContent = stopwatchDisplay[1].textContent = "";
    stopwatchDisplay[2].textContent = stopwatchDisplay[3].textContent = "00";

    resetDocumentTitle();
    toggleStopwatchState("pause");
  },
};

function toggleStopwatchState(state) {
  stopwatchButtons.play.setAttribute("aria-hidden", state === "play");
  stopwatchButtons.pause.setAttribute("aria-hidden", state === "pause");
}

function pushStopwatchToDisplay(time) {
  if (navigation !== "stopwatch") return;

  pushTimeToDocumentTitle(time);

  stopwatchDisplay[3].textContent = time[3];
  stopwatchDisplay[2].textContent = time[2];
  if (time[1] !== "00") stopwatchDisplay[1].textContent = time[1];
  if (time[0] !== "00") stopwatchDisplay[0].textContent = time[0];
}

// Timer

const timerPanel = document.querySelector("#timer");
const timerDisplay = timerPanel.querySelectorAll(".display span");

var timerWorker,
  timerStamp,
  timerFreeze,
  timerOnGoing,
  isAudioEnabled,
  audioFile,
  isNotificationEnabled,
  timerNotification;

timerStamp = 2000; // 2s
timerStamp = 300000; // 5m

audioFile = new Audio("./assets/audio/Alarm Clock Beep.mp3");
isAudioEnabled = JSON.parse(localStorage.getItem("isAudioEnabled")) ?? true;
isNotificationEnabled = JSON.parse(localStorage.getItem("isNotificationEnabled")) ?? false;

const timerButtons = {
  play: timerPanel.querySelector(".control .ph-play-fill"),
  pause: timerPanel.querySelector(".control .ph-pause-fill"),
  close: timerPanel.querySelector(".control .ph-x-fill"),
  save: timerPanel.querySelector(".control [edit].ph-check-fill"),
  restart: timerPanel.querySelector(".control .ph-arrows-counter-clockwise-fill"),
  check: timerPanel.querySelector(".control [finish].ph-check-fill"),
  speakerOn: timerPanel.querySelector(".control .ph-speaker-simple-high-fill"),
  speakerOff: timerPanel.querySelector(".control .ph-speaker-simple-slash-fill"),
  bellOn: timerPanel.querySelector(".control .ph-bell-ringing-fill"),
  bellOff: timerPanel.querySelector(".control .ph-bell-slash-fill"),
};

const timerRoles = {
  edit() {
    toggleTimerState("pause");

    timerWorker?.terminate();

    if (!timerFreeze) timerFreeze = Date.now();

    toggleTimerEditor(true);
  },
  close() {
    let time = timerOnGoing ? timerOnGoing - timerFreeze : timerStamp ? timerStamp : 0;

    pushStringToTimerDisplay(parseTimerStampToString(time), false);

    toggleTimerEditor(false);
  },
  save() {
    timerStamp = parseTimerStringToStamp(getTimerDisplayString());

    resetTimerClockVariables();

    toggleTimerEditor(false);
  },
  play() {
    if (getTimerDisplayString() === "000000" || timerStamp < 1000) return;

    toggleTimerState("play");

    timerOnGoing = !timerOnGoing ? timerStamp + 1000 + Date.now() : timerOnGoing - (timerFreeze - Date.now());

    timerWorker = new Worker("./assets/js/timer.js");
    timerWorker.postMessage(timerOnGoing);

    timerWorker.onmessage = (message) => {
      if (message.data) {
        pushStringToTimerDisplay(message.data);
      } else {
        timerWorker.terminate();

        pushStringToTimerDisplay("000000");

        if (isAudioEnabled) audioFile.play();
        if (isNotificationEnabled) pushTimerNotification();

        toggleFinishTimer(true);
      }
    };
  },
  pause() {
    toggleTimerState("pause");

    timerWorker.terminate();

    timerFreeze = Date.now();
  },
  reset() {
    toggleTimerState("pause");

    timerWorker?.terminate();

    resetDocumentTitle();
    resetTimerClockVariables();
    pushStringToTimerDisplay(parseTimerStampToString(timerStamp ?? 0), false, false);
  },
  restart() {
    audioFile?.pause();
    timerNotification?.close();

    this.reset();

    toggleFinishTimer(false);

    this.play();
  },
  check() {
    audioFile?.pause();
    timerNotification?.close();

    toggleTimerState("pause");
    resetTimerClockVariables();
    toggleFinishTimer(false);
  },
  speakerOn() {
    localStorage.setItem("isAudioEnabled", false);
    isAudioEnabled = false;

    toggleTimerSpeaker();
  },
  speakerOff() {
    localStorage.setItem("isAudioEnabled", true);
    isAudioEnabled = true;

    toggleTimerSpeaker();
  },
  bellOn() {
    localStorage.setItem("isNotificationEnabled", false);
    isNotificationEnabled = false;

    toggleTimerNotification();
  },
  async bellOff() {
    if (Notification.permission === "default") {
      await Notification.requestPermission();
    }
    if (Notification.permission === "granted") {
      localStorage.setItem("isNotificationEnabled", true);
      isNotificationEnabled = true;

      toggleTimerNotification();
    }
    if (Notification.permission === "denied") {
      // shake the icon
    }
  },
};

function toggleTimerState(state) {
  timerButtons.play.setAttribute("aria-hidden", state === "play");
  timerButtons.pause.setAttribute("aria-hidden", state === "pause");
}

function toggleTimerEditor(state) {
  timerPanel.querySelector(".display input").toggleAttribute("edit", state);
  timerPanel.querySelector(".control").toggleAttribute("edit", state);
  timerButtons.close.setAttribute("aria-hidden", !state);
  timerButtons.save.setAttribute("aria-hidden", !state);
}

function pushStringToTimerDisplay(string, compare = true, pushToTile = true) {
  let array = string.match(/.{1,2}/g);

  if (navigation === "timer" && pushToTile) pushTimeToDocumentTitle(array);

  if (compare) {
    if (timerDisplay[0] !== array[0]) timerDisplay[0].textContent = array[0];
    if (timerDisplay[1] !== array[1]) timerDisplay[1].textContent = array[1];
    if (timerDisplay[2] !== array[2]) timerDisplay[2].textContent = array[2];
  } else {
    timerDisplay[0].textContent = array[0];
    timerDisplay[1].textContent = array[1];
    timerDisplay[2].textContent = array[2];
  }
}

function parseTimerStampToString(stamp) {
  let sec = Math.floor(parseInt(stamp / 1000) % 60)
    .toString()
    .padStart(2, "0");
  let min = Math.floor(parseInt(stamp / 60000) % 60)
    .toString()
    .padStart(2, "0");
  let hour = Math.floor(parseInt(stamp / 3600000))
    .toString()
    .padStart(2, "0");

  return `${hour}${min}${sec}`;
}

function parseTimerStringToStamp(string) {
  let time = string.match(/.{1,2}/g);
  return time[0] * 3600000 + time[1] * 60000 + time[2] * 1000;
}

function getTimerDisplayString() {
  return timerPanel
    .querySelector(".display")
    .textContent.replace(/\r?\n|\r/g, "")
    .replace(/:/g, "")
    .replaceAll(" ", "");
}

function resetTimerClockVariables() {
  timerFreeze = timerOnGoing = 0;
}

function toggleFinishTimer(state) {
  timerPanel.querySelector(".control").toggleAttribute("finish", state);
  timerButtons.restart.setAttribute("aria-hidden", !state);
  timerButtons.check.setAttribute("aria-hidden", !state);
}

function toggleTimerSpeaker() {
  timerButtons.speakerOn.setAttribute("aria-hidden", !isAudioEnabled);
  timerButtons.speakerOff.setAttribute("aria-hidden", isAudioEnabled);
}

function toggleTimerNotification() {
  timerButtons.bellOn.setAttribute("aria-hidden", !isNotificationEnabled);
  timerButtons.bellOff.setAttribute("aria-hidden", isNotificationEnabled);
}

function pushTimerNotification() {
  if (!isNotificationEnabled) return;

  timerNotification = new Notification("Oh My Timer", { body: "Timer Finalizado!" });
}

// Timer Input

const timerInput = timerPanel.querySelector(".display input");

timerInput.addEventListener("focus", () => pushStringToTimerDisplay("000000", false));

timerInput.onkeydown = (key) => {
  if (key.key === "Enter") timerRoles.save();
};

timerInput.addEventListener("textInput", (key) => {
  key.preventDefault();
  if (isNaN(key.data)) return;
  pushStringToTimerDisplay(getTimerDisplayString().substring(1) + key.data);
});

/**
 * Update UI after setup
 *
 * Não é necessário colocar scripts abaixo dentro do window.onload pois o arquivo é chamado
 * com atributo defer, executando este script só quando o html ja está pronto.
 */

(() => {
  let target = document.querySelector(`nav [data-type='${navigation}']`);
  let parent = target?.nextElementSibling ?? target?.previousElementSibling;
  toggleNavigationPanel(target, parent);
})();

toggleTimerSpeaker();
toggleTimerNotification();

/**
 * Caso website seja acessado em algum dispositivo móvel o script abaixo altera o tipo do input para int.
 */
let browserAgent = navigator.userAgent || navigator.vendor || window.opera;

if (
  /(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(
    browserAgent
  ) ||
  /1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(
    browserAgent.substr(0, 4)
  )
) {
  timerInput.type = "number";
}

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoianMvbWFpbi5taW4uanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7QUFBQTs7Ozs7Ozs7Ozs7O0FDQUE7Ozs7Ozs7VUNBQTtVQUNBOztVQUVBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBO1VBQ0E7VUFDQTtVQUNBOztVQUVBO1VBQ0E7O1VBRUE7VUFDQTtVQUNBOzs7OztXQ3RCQTtXQUNBO1dBQ0E7V0FDQSx1REFBdUQsaUJBQWlCO1dBQ3hFO1dBQ0EsZ0RBQWdELGFBQWE7V0FDN0Q7Ozs7Ozs7Ozs7Ozs7QUNONkI7QUFDRjtBQUMzQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsSUFBSTtBQUNKO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsNkJBQTZCLG9CQUFvQjtBQUNqRCw2QkFBNkIsb0JBQW9CO0FBQ2pEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLFFBQVEsR0FBRyxRQUFRLEdBQUcsUUFBUTtBQUNsRTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsbUJBQW1CO0FBQ25CLHFCQUFxQjtBQUNyQjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFFBQVE7QUFDUjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0g7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsOEJBQThCLElBQUk7QUFDbEM7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSxJQUFJO0FBQ0o7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLFlBQVksS0FBSyxFQUFFLElBQUksRUFBRSxJQUFJO0FBQzdCO0FBQ0E7QUFDQTtBQUNBLDZCQUE2QixJQUFJO0FBQ2pDO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0Esd0RBQXdELDJCQUEyQjtBQUNuRjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7QUFDRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQSx5REFBeUQsV0FBVztBQUNwRTtBQUNBO0FBQ0EsQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vb2gtbXktdGltZXIvLi9hc3NldHMvY3NzL3Bob3NwaG9yLmNzcyIsIndlYnBhY2s6Ly9vaC1teS10aW1lci8uL2Fzc2V0cy9jc3Mvc3R5bGVzLmNzcyIsIndlYnBhY2s6Ly9vaC1teS10aW1lci93ZWJwYWNrL2Jvb3RzdHJhcCIsIndlYnBhY2s6Ly9vaC1teS10aW1lci93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL29oLW15LXRpbWVyLy4vYXNzZXRzL2pzL21haW4uanMiXSwic291cmNlc0NvbnRlbnQiOlsiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gZXh0cmFjdGVkIGJ5IG1pbmktY3NzLWV4dHJhY3QtcGx1Z2luXG5leHBvcnQge307IiwiLy8gVGhlIG1vZHVsZSBjYWNoZVxudmFyIF9fd2VicGFja19tb2R1bGVfY2FjaGVfXyA9IHt9O1xuXG4vLyBUaGUgcmVxdWlyZSBmdW5jdGlvblxuZnVuY3Rpb24gX193ZWJwYWNrX3JlcXVpcmVfXyhtb2R1bGVJZCkge1xuXHQvLyBDaGVjayBpZiBtb2R1bGUgaXMgaW4gY2FjaGVcblx0dmFyIGNhY2hlZE1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF07XG5cdGlmIChjYWNoZWRNb2R1bGUgIT09IHVuZGVmaW5lZCkge1xuXHRcdHJldHVybiBjYWNoZWRNb2R1bGUuZXhwb3J0cztcblx0fVxuXHQvLyBDcmVhdGUgYSBuZXcgbW9kdWxlIChhbmQgcHV0IGl0IGludG8gdGhlIGNhY2hlKVxuXHR2YXIgbW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXSA9IHtcblx0XHQvLyBubyBtb2R1bGUuaWQgbmVlZGVkXG5cdFx0Ly8gbm8gbW9kdWxlLmxvYWRlZCBuZWVkZWRcblx0XHRleHBvcnRzOiB7fVxuXHR9O1xuXG5cdC8vIEV4ZWN1dGUgdGhlIG1vZHVsZSBmdW5jdGlvblxuXHRfX3dlYnBhY2tfbW9kdWxlc19fW21vZHVsZUlkXShtb2R1bGUsIG1vZHVsZS5leHBvcnRzLCBfX3dlYnBhY2tfcmVxdWlyZV9fKTtcblxuXHQvLyBSZXR1cm4gdGhlIGV4cG9ydHMgb2YgdGhlIG1vZHVsZVxuXHRyZXR1cm4gbW9kdWxlLmV4cG9ydHM7XG59XG5cbiIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsImltcG9ydCBcIi4uL2Nzcy9waG9zcGhvci5jc3NcIjtcclxuaW1wb3J0IFwiLi4vY3NzL3N0eWxlcy5jc3NcIjtcclxuXHJcbi8qKlxyXG4gKiBQYXJhIGV2aXRhciB1c28gZGUgbcO6bHRpcGxvcyBldmVudExpc3RlbmVycyBhcGVuYXMgdW0gZXN0w6Egc2VuZG8gdXRpbGl6YWRvIG5vIGNvbnRhaW5lciBpZGVudGlmaWNhbmRvIG9cclxuICogcGFyZW50ZSBkbyBvYmpldG8gY2xpY2FkbyBbbmF2fHNlY3Rpb25dIGUgZXhlY3V0YW5kbyBhcyBmdW5jaW9uYWxpZGFkZXMgZGUgYWNvcmRvLlxyXG4gKi9cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIm1haW5cIikuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xyXG4gIGlmIChldmVudC50YXJnZXQuY2xvc2VzdChcIm5hdlwiKSAmJiBldmVudC50YXJnZXQuZGF0YXNldD8udHlwZSkge1xyXG4gICAgbGV0IHBhcmVudCA9IGV2ZW50LnRhcmdldD8ubmV4dEVsZW1lbnRTaWJsaW5nID8/IGV2ZW50LnRhcmdldD8ucHJldmlvdXNFbGVtZW50U2libGluZztcclxuXHJcbiAgICBpZiAod2luZG93LmlubmVyV2lkdGggPiAxMDI0ICYmICFldmVudC50YXJnZXQ/Lmhhc0F0dHJpYnV0ZShcImFjdGl2ZVwiKSkgdG9nZ2xlTmF2aWdhdGlvblBhbmVsKGV2ZW50LnRhcmdldCwgcGFyZW50KTtcclxuICAgIGlmICh3aW5kb3cuaW5uZXJXaWR0aCA8PSAxMDI0KSB0b2dnbGVOYXZpZ2F0aW9uUGFuZWwocGFyZW50LCBldmVudC50YXJnZXQpO1xyXG4gIH0gZWxzZSBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJzZWN0aW9uXCIpPy5pZCAmJiBldmVudC50YXJnZXQuZGF0YXNldD8udHlwZSkge1xyXG4gICAgbGV0IGV4ZWMgPSBldmVudC50YXJnZXQuY2xvc2VzdChcInNlY3Rpb25cIikuaWQgPT09IFwidGltZXJcIiA/IHRpbWVyUm9sZXMgOiBzdG9wd2F0Y2hSb2xlcztcclxuICAgIGxldCByb2xlID0gZXZlbnQudGFyZ2V0LmRhdGFzZXQudHlwZTtcclxuXHJcbiAgICBpZiAoIXJvbGUgfHwgdHlwZW9mIHJvbGUgIT09IFwic3RyaW5nXCIpIHJldHVybjtcclxuICAgIGlmIChleGVjW3JvbGVdKSBleGVjW3JvbGVdKCk7XHJcbiAgfVxyXG59KTtcclxuXHJcbi8vIE5hdmlnYXRpb25cclxuXHJcbnZhciBuYXZpZ2F0aW9uID0gbG9jYWxTdG9yYWdlLmdldEl0ZW0oXCJuYXZpZ2F0aW9uXCIpID8/IFwidGltZXJcIjtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZU5hdmlnYXRpb25QYW5lbCh0YXJnZXQsIHBhcmVudCkge1xyXG4gIG5hdmlnYXRpb24gPSB0YXJnZXQuZGF0YXNldC50eXBlO1xyXG4gIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwibmF2aWdhdGlvblwiLCBuYXZpZ2F0aW9uKTtcclxuXHJcbiAgcmVzZXREb2N1bWVudFRpdGxlKCk7XHJcblxyXG4gIHRhcmdldC50b2dnbGVBdHRyaWJ1dGUoXCJhY3RpdmVcIiwgdHJ1ZSk7XHJcbiAgcGFyZW50LnRvZ2dsZUF0dHJpYnV0ZShcImFjdGl2ZVwiLCBmYWxzZSk7XHJcblxyXG4gIHRhcmdldC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIHRydWUpO1xyXG4gIHBhcmVudC5zZXRBdHRyaWJ1dGUoXCJhcmlhLWV4cGFuZGVkXCIsIGZhbHNlKTtcclxuXHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7dGFyZ2V0LmRhdGFzZXQudHlwZX1gKS50b2dnbGVBdHRyaWJ1dGUoXCJhY3RpdmVcIiwgdHJ1ZSk7XHJcbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihgLiR7cGFyZW50LmRhdGFzZXQudHlwZX1gKS50b2dnbGVBdHRyaWJ1dGUoXCJhY3RpdmVcIiwgZmFsc2UpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldERvY3VtZW50VGl0bGUoKSB7XHJcbiAgZG9jdW1lbnQudGl0bGUgPSBcIk9oIE15IFRpbWVyXCI7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHB1c2hUaW1lVG9Eb2N1bWVudFRpdGxlKHRpbWUpIHtcclxuICBkb2N1bWVudC50aXRsZSA9IGBPaCBNeSBUaW1lciAtICR7dGltZVswXX06JHt0aW1lWzFdfToke3RpbWVbMl19YDtcclxufVxyXG5cclxuLy8gU3RvcHdhdGNoXHJcblxyXG5jb25zdCBzdG9wd2F0Y2hQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjc3RvcHdhdGNoXCIpO1xyXG5jb25zdCBzdG9wd2F0Y2hEaXNwbGF5ID0gc3RvcHdhdGNoUGFuZWwucXVlcnlTZWxlY3RvckFsbChcIi5kaXNwbGF5IHNwYW5cIik7XHJcblxyXG52YXIgc3RvcHdhdGNoV29ya2VyLCBzdG9wd2F0Y2hTdGFtcCwgc3RvcHdhdGNoRnJlZXplVGltZTtcclxuXHJcbmNvbnN0IHN0b3B3YXRjaEJ1dHRvbnMgPSB7XHJcbiAgcGxheTogc3RvcHdhdGNoUGFuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sIC5waC1wbGF5LWZpbGxcIiksXHJcbiAgcGF1c2U6IHN0b3B3YXRjaFBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbCAucGgtcGF1c2UtZmlsbFwiKSxcclxufTtcclxuXHJcbmNvbnN0IHN0b3B3YXRjaFJvbGVzID0ge1xyXG4gIHBsYXkoKSB7XHJcbiAgICB0b2dnbGVTdG9wd2F0Y2hTdGF0ZShcInBsYXlcIik7XHJcblxyXG4gICAgc3RvcHdhdGNoU3RhbXAgPSAhc3RvcHdhdGNoU3RhbXAgPyBEYXRlLm5vdygpIDogc3RvcHdhdGNoU3RhbXAgKyBEYXRlLm5vdygpIC0gc3RvcHdhdGNoRnJlZXplVGltZTtcclxuXHJcbiAgICBzdG9wd2F0Y2hXb3JrZXIgPSBuZXcgV29ya2VyKFwiLi9hc3NldHMvanMvc3RvcHdhdGNoLmpzXCIpO1xyXG4gICAgc3RvcHdhdGNoV29ya2VyLnBvc3RNZXNzYWdlKHN0b3B3YXRjaFN0YW1wKTtcclxuICAgIHN0b3B3YXRjaFdvcmtlci5vbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4gcHVzaFN0b3B3YXRjaFRvRGlzcGxheShtZXNzYWdlLmRhdGEpO1xyXG4gIH0sXHJcbiAgcGF1c2UoKSB7XHJcbiAgICBzdG9wd2F0Y2hXb3JrZXIudGVybWluYXRlKCk7XHJcblxyXG4gICAgc3RvcHdhdGNoRnJlZXplVGltZSA9IERhdGUubm93KCk7XHJcblxyXG4gICAgdG9nZ2xlU3RvcHdhdGNoU3RhdGUoXCJwYXVzZVwiKTtcclxuICB9LFxyXG4gIHJlcGxheSgpIHtcclxuICAgIHN0b3B3YXRjaFdvcmtlci50ZXJtaW5hdGUoKTtcclxuXHJcbiAgICBzdG9wd2F0Y2hTdGFtcCA9IHN0b3B3YXRjaEZyZWV6ZVRpbWUgPSBmYWxzZTtcclxuXHJcbiAgICBzdG9wd2F0Y2hEaXNwbGF5WzBdLnRleHRDb250ZW50ID0gc3RvcHdhdGNoRGlzcGxheVsxXS50ZXh0Q29udGVudCA9IFwiXCI7XHJcbiAgICBzdG9wd2F0Y2hEaXNwbGF5WzJdLnRleHRDb250ZW50ID0gc3RvcHdhdGNoRGlzcGxheVszXS50ZXh0Q29udGVudCA9IFwiMDBcIjtcclxuXHJcbiAgICByZXNldERvY3VtZW50VGl0bGUoKTtcclxuICAgIHRvZ2dsZVN0b3B3YXRjaFN0YXRlKFwicGF1c2VcIik7XHJcbiAgfSxcclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVN0b3B3YXRjaFN0YXRlKHN0YXRlKSB7XHJcbiAgc3RvcHdhdGNoQnV0dG9ucy5wbGF5LnNldEF0dHJpYnV0ZShcImFyaWEtaGlkZGVuXCIsIHN0YXRlID09PSBcInBsYXlcIik7XHJcbiAgc3RvcHdhdGNoQnV0dG9ucy5wYXVzZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBzdGF0ZSA9PT0gXCJwYXVzZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHVzaFN0b3B3YXRjaFRvRGlzcGxheSh0aW1lKSB7XHJcbiAgaWYgKG5hdmlnYXRpb24gIT09IFwic3RvcHdhdGNoXCIpIHJldHVybjtcclxuXHJcbiAgcHVzaFRpbWVUb0RvY3VtZW50VGl0bGUodGltZSk7XHJcblxyXG4gIHN0b3B3YXRjaERpc3BsYXlbM10udGV4dENvbnRlbnQgPSB0aW1lWzNdO1xyXG4gIHN0b3B3YXRjaERpc3BsYXlbMl0udGV4dENvbnRlbnQgPSB0aW1lWzJdO1xyXG4gIGlmICh0aW1lWzFdICE9PSBcIjAwXCIpIHN0b3B3YXRjaERpc3BsYXlbMV0udGV4dENvbnRlbnQgPSB0aW1lWzFdO1xyXG4gIGlmICh0aW1lWzBdICE9PSBcIjAwXCIpIHN0b3B3YXRjaERpc3BsYXlbMF0udGV4dENvbnRlbnQgPSB0aW1lWzBdO1xyXG59XHJcblxyXG4vLyBUaW1lclxyXG5cclxuY29uc3QgdGltZXJQYW5lbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjdGltZXJcIik7XHJcbmNvbnN0IHRpbWVyRGlzcGxheSA9IHRpbWVyUGFuZWwucXVlcnlTZWxlY3RvckFsbChcIi5kaXNwbGF5IHNwYW5cIik7XHJcblxyXG52YXIgdGltZXJXb3JrZXIsXHJcbiAgdGltZXJTdGFtcCxcclxuICB0aW1lckZyZWV6ZSxcclxuICB0aW1lck9uR29pbmcsXHJcbiAgaXNBdWRpb0VuYWJsZWQsXHJcbiAgYXVkaW9GaWxlLFxyXG4gIGlzTm90aWZpY2F0aW9uRW5hYmxlZCxcclxuICB0aW1lck5vdGlmaWNhdGlvbjtcclxuXHJcbnRpbWVyU3RhbXAgPSAyMDAwOyAvLyAyc1xyXG50aW1lclN0YW1wID0gMzAwMDAwOyAvLyA1bVxyXG5cclxuYXVkaW9GaWxlID0gbmV3IEF1ZGlvKFwiLi9hc3NldHMvYXVkaW8vQWxhcm0gQ2xvY2sgQmVlcC5tcDNcIik7XHJcbmlzQXVkaW9FbmFibGVkID0gSlNPTi5wYXJzZShsb2NhbFN0b3JhZ2UuZ2V0SXRlbShcImlzQXVkaW9FbmFibGVkXCIpKSA/PyB0cnVlO1xyXG5pc05vdGlmaWNhdGlvbkVuYWJsZWQgPSBKU09OLnBhcnNlKGxvY2FsU3RvcmFnZS5nZXRJdGVtKFwiaXNOb3RpZmljYXRpb25FbmFibGVkXCIpKSA/PyBmYWxzZTtcclxuXHJcbmNvbnN0IHRpbWVyQnV0dG9ucyA9IHtcclxuICBwbGF5OiB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbCAucGgtcGxheS1maWxsXCIpLFxyXG4gIHBhdXNlOiB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbCAucGgtcGF1c2UtZmlsbFwiKSxcclxuICBjbG9zZTogdGltZXJQYW5lbC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRyb2wgLnBoLXgtZmlsbFwiKSxcclxuICBzYXZlOiB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbCBbZWRpdF0ucGgtY2hlY2stZmlsbFwiKSxcclxuICByZXN0YXJ0OiB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbCAucGgtYXJyb3dzLWNvdW50ZXItY2xvY2t3aXNlLWZpbGxcIiksXHJcbiAgY2hlY2s6IHRpbWVyUGFuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sIFtmaW5pc2hdLnBoLWNoZWNrLWZpbGxcIiksXHJcbiAgc3BlYWtlck9uOiB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbCAucGgtc3BlYWtlci1zaW1wbGUtaGlnaC1maWxsXCIpLFxyXG4gIHNwZWFrZXJPZmY6IHRpbWVyUGFuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sIC5waC1zcGVha2VyLXNpbXBsZS1zbGFzaC1maWxsXCIpLFxyXG4gIGJlbGxPbjogdGltZXJQYW5lbC5xdWVyeVNlbGVjdG9yKFwiLmNvbnRyb2wgLnBoLWJlbGwtcmluZ2luZy1maWxsXCIpLFxyXG4gIGJlbGxPZmY6IHRpbWVyUGFuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sIC5waC1iZWxsLXNsYXNoLWZpbGxcIiksXHJcbn07XHJcblxyXG5jb25zdCB0aW1lclJvbGVzID0ge1xyXG4gIGVkaXQoKSB7XHJcbiAgICB0b2dnbGVUaW1lclN0YXRlKFwicGF1c2VcIik7XHJcblxyXG4gICAgdGltZXJXb3JrZXI/LnRlcm1pbmF0ZSgpO1xyXG5cclxuICAgIGlmICghdGltZXJGcmVlemUpIHRpbWVyRnJlZXplID0gRGF0ZS5ub3coKTtcclxuXHJcbiAgICB0b2dnbGVUaW1lckVkaXRvcih0cnVlKTtcclxuICB9LFxyXG4gIGNsb3NlKCkge1xyXG4gICAgbGV0IHRpbWUgPSB0aW1lck9uR29pbmcgPyB0aW1lck9uR29pbmcgLSB0aW1lckZyZWV6ZSA6IHRpbWVyU3RhbXAgPyB0aW1lclN0YW1wIDogMDtcclxuXHJcbiAgICBwdXNoU3RyaW5nVG9UaW1lckRpc3BsYXkocGFyc2VUaW1lclN0YW1wVG9TdHJpbmcodGltZSksIGZhbHNlKTtcclxuXHJcbiAgICB0b2dnbGVUaW1lckVkaXRvcihmYWxzZSk7XHJcbiAgfSxcclxuICBzYXZlKCkge1xyXG4gICAgdGltZXJTdGFtcCA9IHBhcnNlVGltZXJTdHJpbmdUb1N0YW1wKGdldFRpbWVyRGlzcGxheVN0cmluZygpKTtcclxuXHJcbiAgICByZXNldFRpbWVyQ2xvY2tWYXJpYWJsZXMoKTtcclxuXHJcbiAgICB0b2dnbGVUaW1lckVkaXRvcihmYWxzZSk7XHJcbiAgfSxcclxuICBwbGF5KCkge1xyXG4gICAgaWYgKGdldFRpbWVyRGlzcGxheVN0cmluZygpID09PSBcIjAwMDAwMFwiIHx8IHRpbWVyU3RhbXAgPCAxMDAwKSByZXR1cm47XHJcblxyXG4gICAgdG9nZ2xlVGltZXJTdGF0ZShcInBsYXlcIik7XHJcblxyXG4gICAgdGltZXJPbkdvaW5nID0gIXRpbWVyT25Hb2luZyA/IHRpbWVyU3RhbXAgKyAxMDAwICsgRGF0ZS5ub3coKSA6IHRpbWVyT25Hb2luZyAtICh0aW1lckZyZWV6ZSAtIERhdGUubm93KCkpO1xyXG5cclxuICAgIHRpbWVyV29ya2VyID0gbmV3IFdvcmtlcihcIi4vYXNzZXRzL2pzL3RpbWVyLmpzXCIpO1xyXG4gICAgdGltZXJXb3JrZXIucG9zdE1lc3NhZ2UodGltZXJPbkdvaW5nKTtcclxuXHJcbiAgICB0aW1lcldvcmtlci5vbm1lc3NhZ2UgPSAobWVzc2FnZSkgPT4ge1xyXG4gICAgICBpZiAobWVzc2FnZS5kYXRhKSB7XHJcbiAgICAgICAgcHVzaFN0cmluZ1RvVGltZXJEaXNwbGF5KG1lc3NhZ2UuZGF0YSk7XHJcbiAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGltZXJXb3JrZXIudGVybWluYXRlKCk7XHJcblxyXG4gICAgICAgIHB1c2hTdHJpbmdUb1RpbWVyRGlzcGxheShcIjAwMDAwMFwiKTtcclxuXHJcbiAgICAgICAgaWYgKGlzQXVkaW9FbmFibGVkKSBhdWRpb0ZpbGUucGxheSgpO1xyXG4gICAgICAgIGlmIChpc05vdGlmaWNhdGlvbkVuYWJsZWQpIHB1c2hUaW1lck5vdGlmaWNhdGlvbigpO1xyXG5cclxuICAgICAgICB0b2dnbGVGaW5pc2hUaW1lcih0cnVlKTtcclxuICAgICAgfVxyXG4gICAgfTtcclxuICB9LFxyXG4gIHBhdXNlKCkge1xyXG4gICAgdG9nZ2xlVGltZXJTdGF0ZShcInBhdXNlXCIpO1xyXG5cclxuICAgIHRpbWVyV29ya2VyLnRlcm1pbmF0ZSgpO1xyXG5cclxuICAgIHRpbWVyRnJlZXplID0gRGF0ZS5ub3coKTtcclxuICB9LFxyXG4gIHJlc2V0KCkge1xyXG4gICAgdG9nZ2xlVGltZXJTdGF0ZShcInBhdXNlXCIpO1xyXG5cclxuICAgIHRpbWVyV29ya2VyPy50ZXJtaW5hdGUoKTtcclxuXHJcbiAgICByZXNldERvY3VtZW50VGl0bGUoKTtcclxuICAgIHJlc2V0VGltZXJDbG9ja1ZhcmlhYmxlcygpO1xyXG4gICAgcHVzaFN0cmluZ1RvVGltZXJEaXNwbGF5KHBhcnNlVGltZXJTdGFtcFRvU3RyaW5nKHRpbWVyU3RhbXAgPz8gMCksIGZhbHNlLCBmYWxzZSk7XHJcbiAgfSxcclxuICByZXN0YXJ0KCkge1xyXG4gICAgYXVkaW9GaWxlPy5wYXVzZSgpO1xyXG4gICAgdGltZXJOb3RpZmljYXRpb24/LmNsb3NlKCk7XHJcblxyXG4gICAgdGhpcy5yZXNldCgpO1xyXG5cclxuICAgIHRvZ2dsZUZpbmlzaFRpbWVyKGZhbHNlKTtcclxuXHJcbiAgICB0aGlzLnBsYXkoKTtcclxuICB9LFxyXG4gIGNoZWNrKCkge1xyXG4gICAgYXVkaW9GaWxlPy5wYXVzZSgpO1xyXG4gICAgdGltZXJOb3RpZmljYXRpb24/LmNsb3NlKCk7XHJcblxyXG4gICAgdG9nZ2xlVGltZXJTdGF0ZShcInBhdXNlXCIpO1xyXG4gICAgcmVzZXRUaW1lckNsb2NrVmFyaWFibGVzKCk7XHJcbiAgICB0b2dnbGVGaW5pc2hUaW1lcihmYWxzZSk7XHJcbiAgfSxcclxuICBzcGVha2VyT24oKSB7XHJcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcImlzQXVkaW9FbmFibGVkXCIsIGZhbHNlKTtcclxuICAgIGlzQXVkaW9FbmFibGVkID0gZmFsc2U7XHJcblxyXG4gICAgdG9nZ2xlVGltZXJTcGVha2VyKCk7XHJcbiAgfSxcclxuICBzcGVha2VyT2ZmKCkge1xyXG4gICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpc0F1ZGlvRW5hYmxlZFwiLCB0cnVlKTtcclxuICAgIGlzQXVkaW9FbmFibGVkID0gdHJ1ZTtcclxuXHJcbiAgICB0b2dnbGVUaW1lclNwZWFrZXIoKTtcclxuICB9LFxyXG4gIGJlbGxPbigpIHtcclxuICAgIGxvY2FsU3RvcmFnZS5zZXRJdGVtKFwiaXNOb3RpZmljYXRpb25FbmFibGVkXCIsIGZhbHNlKTtcclxuICAgIGlzTm90aWZpY2F0aW9uRW5hYmxlZCA9IGZhbHNlO1xyXG5cclxuICAgIHRvZ2dsZVRpbWVyTm90aWZpY2F0aW9uKCk7XHJcbiAgfSxcclxuICBhc3luYyBiZWxsT2ZmKCkge1xyXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSBcImRlZmF1bHRcIikge1xyXG4gICAgICBhd2FpdCBOb3RpZmljYXRpb24ucmVxdWVzdFBlcm1pc3Npb24oKTtcclxuICAgIH1cclxuICAgIGlmIChOb3RpZmljYXRpb24ucGVybWlzc2lvbiA9PT0gXCJncmFudGVkXCIpIHtcclxuICAgICAgbG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJpc05vdGlmaWNhdGlvbkVuYWJsZWRcIiwgdHJ1ZSk7XHJcbiAgICAgIGlzTm90aWZpY2F0aW9uRW5hYmxlZCA9IHRydWU7XHJcblxyXG4gICAgICB0b2dnbGVUaW1lck5vdGlmaWNhdGlvbigpO1xyXG4gICAgfVxyXG4gICAgaWYgKE5vdGlmaWNhdGlvbi5wZXJtaXNzaW9uID09PSBcImRlbmllZFwiKSB7XHJcbiAgICAgIC8vIHNoYWtlIHRoZSBpY29uXHJcbiAgICB9XHJcbiAgfSxcclxufTtcclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVRpbWVyU3RhdGUoc3RhdGUpIHtcclxuICB0aW1lckJ1dHRvbnMucGxheS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBzdGF0ZSA9PT0gXCJwbGF5XCIpO1xyXG4gIHRpbWVyQnV0dG9ucy5wYXVzZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBzdGF0ZSA9PT0gXCJwYXVzZVwiKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlVGltZXJFZGl0b3Ioc3RhdGUpIHtcclxuICB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheSBpbnB1dFwiKS50b2dnbGVBdHRyaWJ1dGUoXCJlZGl0XCIsIHN0YXRlKTtcclxuICB0aW1lclBhbmVsLnF1ZXJ5U2VsZWN0b3IoXCIuY29udHJvbFwiKS50b2dnbGVBdHRyaWJ1dGUoXCJlZGl0XCIsIHN0YXRlKTtcclxuICB0aW1lckJ1dHRvbnMuY2xvc2Uuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgIXN0YXRlKTtcclxuICB0aW1lckJ1dHRvbnMuc2F2ZS5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCAhc3RhdGUpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBwdXNoU3RyaW5nVG9UaW1lckRpc3BsYXkoc3RyaW5nLCBjb21wYXJlID0gdHJ1ZSwgcHVzaFRvVGlsZSA9IHRydWUpIHtcclxuICBsZXQgYXJyYXkgPSBzdHJpbmcubWF0Y2goLy57MSwyfS9nKTtcclxuXHJcbiAgaWYgKG5hdmlnYXRpb24gPT09IFwidGltZXJcIiAmJiBwdXNoVG9UaWxlKSBwdXNoVGltZVRvRG9jdW1lbnRUaXRsZShhcnJheSk7XHJcblxyXG4gIGlmIChjb21wYXJlKSB7XHJcbiAgICBpZiAodGltZXJEaXNwbGF5WzBdICE9PSBhcnJheVswXSkgdGltZXJEaXNwbGF5WzBdLnRleHRDb250ZW50ID0gYXJyYXlbMF07XHJcbiAgICBpZiAodGltZXJEaXNwbGF5WzFdICE9PSBhcnJheVsxXSkgdGltZXJEaXNwbGF5WzFdLnRleHRDb250ZW50ID0gYXJyYXlbMV07XHJcbiAgICBpZiAodGltZXJEaXNwbGF5WzJdICE9PSBhcnJheVsyXSkgdGltZXJEaXNwbGF5WzJdLnRleHRDb250ZW50ID0gYXJyYXlbMl07XHJcbiAgfSBlbHNlIHtcclxuICAgIHRpbWVyRGlzcGxheVswXS50ZXh0Q29udGVudCA9IGFycmF5WzBdO1xyXG4gICAgdGltZXJEaXNwbGF5WzFdLnRleHRDb250ZW50ID0gYXJyYXlbMV07XHJcbiAgICB0aW1lckRpc3BsYXlbMl0udGV4dENvbnRlbnQgPSBhcnJheVsyXTtcclxuICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlVGltZXJTdGFtcFRvU3RyaW5nKHN0YW1wKSB7XHJcbiAgbGV0IHNlYyA9IE1hdGguZmxvb3IocGFyc2VJbnQoc3RhbXAgLyAxMDAwKSAlIDYwKVxyXG4gICAgLnRvU3RyaW5nKClcclxuICAgIC5wYWRTdGFydCgyLCBcIjBcIik7XHJcbiAgbGV0IG1pbiA9IE1hdGguZmxvb3IocGFyc2VJbnQoc3RhbXAgLyA2MDAwMCkgJSA2MClcclxuICAgIC50b1N0cmluZygpXHJcbiAgICAucGFkU3RhcnQoMiwgXCIwXCIpO1xyXG4gIGxldCBob3VyID0gTWF0aC5mbG9vcihwYXJzZUludChzdGFtcCAvIDM2MDAwMDApKVxyXG4gICAgLnRvU3RyaW5nKClcclxuICAgIC5wYWRTdGFydCgyLCBcIjBcIik7XHJcblxyXG4gIHJldHVybiBgJHtob3VyfSR7bWlufSR7c2VjfWA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHBhcnNlVGltZXJTdHJpbmdUb1N0YW1wKHN0cmluZykge1xyXG4gIGxldCB0aW1lID0gc3RyaW5nLm1hdGNoKC8uezEsMn0vZyk7XHJcbiAgcmV0dXJuIHRpbWVbMF0gKiAzNjAwMDAwICsgdGltZVsxXSAqIDYwMDAwICsgdGltZVsyXSAqIDEwMDA7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGdldFRpbWVyRGlzcGxheVN0cmluZygpIHtcclxuICByZXR1cm4gdGltZXJQYW5lbFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuZGlzcGxheVwiKVxyXG4gICAgLnRleHRDb250ZW50LnJlcGxhY2UoL1xccj9cXG58XFxyL2csIFwiXCIpXHJcbiAgICAucmVwbGFjZSgvOi9nLCBcIlwiKVxyXG4gICAgLnJlcGxhY2VBbGwoXCIgXCIsIFwiXCIpO1xyXG59XHJcblxyXG5mdW5jdGlvbiByZXNldFRpbWVyQ2xvY2tWYXJpYWJsZXMoKSB7XHJcbiAgdGltZXJGcmVlemUgPSB0aW1lck9uR29pbmcgPSAwO1xyXG59XHJcblxyXG5mdW5jdGlvbiB0b2dnbGVGaW5pc2hUaW1lcihzdGF0ZSkge1xyXG4gIHRpbWVyUGFuZWwucXVlcnlTZWxlY3RvcihcIi5jb250cm9sXCIpLnRvZ2dsZUF0dHJpYnV0ZShcImZpbmlzaFwiLCBzdGF0ZSk7XHJcbiAgdGltZXJCdXR0b25zLnJlc3RhcnQuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgIXN0YXRlKTtcclxuICB0aW1lckJ1dHRvbnMuY2hlY2suc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgIXN0YXRlKTtcclxufVxyXG5cclxuZnVuY3Rpb24gdG9nZ2xlVGltZXJTcGVha2VyKCkge1xyXG4gIHRpbWVyQnV0dG9ucy5zcGVha2VyT24uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgIWlzQXVkaW9FbmFibGVkKTtcclxuICB0aW1lckJ1dHRvbnMuc3BlYWtlck9mZi5zZXRBdHRyaWJ1dGUoXCJhcmlhLWhpZGRlblwiLCBpc0F1ZGlvRW5hYmxlZCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHRvZ2dsZVRpbWVyTm90aWZpY2F0aW9uKCkge1xyXG4gIHRpbWVyQnV0dG9ucy5iZWxsT24uc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgIWlzTm90aWZpY2F0aW9uRW5hYmxlZCk7XHJcbiAgdGltZXJCdXR0b25zLmJlbGxPZmYuc2V0QXR0cmlidXRlKFwiYXJpYS1oaWRkZW5cIiwgaXNOb3RpZmljYXRpb25FbmFibGVkKTtcclxufVxyXG5cclxuZnVuY3Rpb24gcHVzaFRpbWVyTm90aWZpY2F0aW9uKCkge1xyXG4gIGlmICghaXNOb3RpZmljYXRpb25FbmFibGVkKSByZXR1cm47XHJcblxyXG4gIHRpbWVyTm90aWZpY2F0aW9uID0gbmV3IE5vdGlmaWNhdGlvbihcIk9oIE15IFRpbWVyXCIsIHsgYm9keTogXCJUaW1lciBGaW5hbGl6YWRvIVwiIH0pO1xyXG59XHJcblxyXG4vLyBUaW1lciBJbnB1dFxyXG5cclxuY29uc3QgdGltZXJJbnB1dCA9IHRpbWVyUGFuZWwucXVlcnlTZWxlY3RvcihcIi5kaXNwbGF5IGlucHV0XCIpO1xyXG5cclxudGltZXJJbnB1dC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4gcHVzaFN0cmluZ1RvVGltZXJEaXNwbGF5KFwiMDAwMDAwXCIsIGZhbHNlKSk7XHJcblxyXG50aW1lcklucHV0Lm9ua2V5ZG93biA9IChrZXkpID0+IHtcclxuICBpZiAoa2V5LmtleSA9PT0gXCJFbnRlclwiKSB0aW1lclJvbGVzLnNhdmUoKTtcclxufTtcclxuXHJcbnRpbWVySW5wdXQuYWRkRXZlbnRMaXN0ZW5lcihcInRleHRJbnB1dFwiLCAoa2V5KSA9PiB7XHJcbiAga2V5LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgaWYgKGlzTmFOKGtleS5kYXRhKSkgcmV0dXJuO1xyXG4gIHB1c2hTdHJpbmdUb1RpbWVyRGlzcGxheShnZXRUaW1lckRpc3BsYXlTdHJpbmcoKS5zdWJzdHJpbmcoMSkgKyBrZXkuZGF0YSk7XHJcbn0pO1xyXG5cclxuLyoqXHJcbiAqIFVwZGF0ZSBVSSBhZnRlciBzZXR1cFxyXG4gKlxyXG4gKiBOw6NvIMOpIG5lY2Vzc8OhcmlvIGNvbG9jYXIgc2NyaXB0cyBhYmFpeG8gZGVudHJvIGRvIHdpbmRvdy5vbmxvYWQgcG9pcyBvIGFycXVpdm8gw6kgY2hhbWFkb1xyXG4gKiBjb20gYXRyaWJ1dG8gZGVmZXIsIGV4ZWN1dGFuZG8gZXN0ZSBzY3JpcHQgc8OzIHF1YW5kbyBvIGh0bWwgamEgZXN0w6EgcHJvbnRvLlxyXG4gKi9cclxuXHJcbigoKSA9PiB7XHJcbiAgbGV0IHRhcmdldCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoYG5hdiBbZGF0YS10eXBlPScke25hdmlnYXRpb259J11gKTtcclxuICBsZXQgcGFyZW50ID0gdGFyZ2V0Py5uZXh0RWxlbWVudFNpYmxpbmcgPz8gdGFyZ2V0Py5wcmV2aW91c0VsZW1lbnRTaWJsaW5nO1xyXG4gIHRvZ2dsZU5hdmlnYXRpb25QYW5lbCh0YXJnZXQsIHBhcmVudCk7XHJcbn0pKCk7XHJcblxyXG50b2dnbGVUaW1lclNwZWFrZXIoKTtcclxudG9nZ2xlVGltZXJOb3RpZmljYXRpb24oKTtcclxuXHJcbi8qKlxyXG4gKiBDYXNvIHdlYnNpdGUgc2VqYSBhY2Vzc2FkbyBlbSBhbGd1bSBkaXNwb3NpdGl2byBtw7N2ZWwgbyBzY3JpcHQgYWJhaXhvIGFsdGVyYSBvIHRpcG8gZG8gaW5wdXQgcGFyYSBpbnQuXHJcbiAqL1xyXG5sZXQgYnJvd3NlckFnZW50ID0gbmF2aWdhdG9yLnVzZXJBZ2VudCB8fCBuYXZpZ2F0b3IudmVuZG9yIHx8IHdpbmRvdy5vcGVyYTtcclxuXHJcbmlmIChcclxuICAvKGFuZHJvaWR8YmJcXGQrfG1lZWdvKS4rbW9iaWxlfGF2YW50Z298YmFkYVxcL3xibGFja2JlcnJ5fGJsYXplcnxjb21wYWx8ZWxhaW5lfGZlbm5lY3xoaXB0b3B8aWVtb2JpbGV8aXAoaG9uZXxvZCl8aXJpc3xraW5kbGV8bGdlIHxtYWVtb3xtaWRwfG1tcHxtb2JpbGUuK2ZpcmVmb3h8bmV0ZnJvbnR8b3BlcmEgbShvYnxpbilpfHBhbG0oIG9zKT98cGhvbmV8cChpeGl8cmUpXFwvfHBsdWNrZXJ8cG9ja2V0fHBzcHxzZXJpZXMoNHw2KTB8c3ltYmlhbnx0cmVvfHVwXFwuKGJyb3dzZXJ8bGluayl8dm9kYWZvbmV8d2FwfHdpbmRvd3MgY2V8eGRhfHhpaW5vL2kudGVzdChcclxuICAgIGJyb3dzZXJBZ2VudFxyXG4gICkgfHxcclxuICAvMTIwN3w2MzEwfDY1OTB8M2dzb3w0dGhwfDUwWzEtNl1pfDc3MHN8ODAyc3xhIHdhfGFiYWN8YWMoZXJ8b298c1xcLSl8YWkoa298cm4pfGFsKGF2fGNhfGNvKXxhbW9pfGFuKGV4fG55fHl3KXxhcHR1fGFyKGNofGdvKXxhcyh0ZXx1cyl8YXR0d3xhdShkaXxcXC1tfHIgfHMgKXxhdmFufGJlKGNrfGxsfG5xKXxiaShsYnxyZCl8YmwoYWN8YXopfGJyKGV8dil3fGJ1bWJ8YndcXC0obnx1KXxjNTVcXC98Y2FwaXxjY3dhfGNkbVxcLXxjZWxsfGNodG18Y2xkY3xjbWRcXC18Y28obXB8bmQpfGNyYXd8ZGEoaXR8bGx8bmcpfGRidGV8ZGNcXC1zfGRldml8ZGljYXxkbW9ifGRvKGN8cClvfGRzKDEyfFxcLWQpfGVsKDQ5fGFpKXxlbShsMnx1bCl8ZXIoaWN8azApfGVzbDh8ZXooWzQtN10wfG9zfHdhfHplKXxmZXRjfGZseShcXC18Xyl8ZzEgdXxnNTYwfGdlbmV8Z2ZcXC01fGdcXC1tb3xnbyhcXC53fG9kKXxncihhZHx1bil8aGFpZXxoY2l0fGhkXFwtKG18cHx0KXxoZWlcXC18aGkocHR8dGEpfGhwKCBpfGlwKXxoc1xcLWN8aHQoYyhcXC18IHxffGF8Z3xwfHN8dCl8dHApfGh1KGF3fHRjKXxpXFwtKDIwfGdvfG1hKXxpMjMwfGlhYyggfFxcLXxcXC8pfGlicm98aWRlYXxpZzAxfGlrb218aW0xa3xpbm5vfGlwYXF8aXJpc3xqYSh0fHYpYXxqYnJvfGplbXV8amlnc3xrZGRpfGtlaml8a2d0KCB8XFwvKXxrbG9ufGtwdCB8a3djXFwtfGt5byhjfGspfGxlKG5vfHhpKXxsZyggZ3xcXC8oa3xsfHUpfDUwfDU0fFxcLVthLXddKXxsaWJ3fGx5bnh8bTFcXC13fG0zZ2F8bTUwXFwvfG1hKHRlfHVpfHhvKXxtYygwMXwyMXxjYSl8bVxcLWNyfG1lKHJjfHJpKXxtaShvOHxvYXx0cyl8bW1lZnxtbygwMXwwMnxiaXxkZXxkb3x0KFxcLXwgfG98dil8enopfG10KDUwfHAxfHYgKXxtd2JwfG15d2F8bjEwWzAtMl18bjIwWzItM118bjMwKDB8Mil8bjUwKDB8Mnw1KXxuNygwKDB8MSl8MTApfG5lKChjfG0pXFwtfG9ufHRmfHdmfHdnfHd0KXxub2soNnxpKXxuenBofG8yaW18b3AodGl8d3YpfG9yYW58b3dnMXxwODAwfHBhbihhfGR8dCl8cGR4Z3xwZygxM3xcXC0oWzEtOF18YykpfHBoaWx8cGlyZXxwbChheXx1Yyl8cG5cXC0yfHBvKGNrfHJ0fHNlKXxwcm94fHBzaW98cHRcXC1nfHFhXFwtYXxxYygwN3wxMnwyMXwzMnw2MHxcXC1bMi03XXxpXFwtKXxxdGVrfHIzODB8cjYwMHxyYWtzfHJpbTl8cm8odmV8em8pfHM1NVxcL3xzYShnZXxtYXxtbXxtc3xueXx2YSl8c2MoMDF8aFxcLXxvb3xwXFwtKXxzZGtcXC98c2UoYyhcXC18MHwxKXw0N3xtY3xuZHxyaSl8c2doXFwtfHNoYXJ8c2llKFxcLXxtKXxza1xcLTB8c2woNDV8aWQpfHNtKGFsfGFyfGIzfGl0fHQ1KXxzbyhmdHxueSl8c3AoMDF8aFxcLXx2XFwtfHYgKXxzeSgwMXxtYil8dDIoMTh8NTApfHQ2KDAwfDEwfDE4KXx0YShndHxsayl8dGNsXFwtfHRkZ1xcLXx0ZWwoaXxtKXx0aW1cXC18dFxcLW1vfHRvKHBsfHNoKXx0cyg3MHxtXFwtfG0zfG01KXx0eFxcLTl8dXAoXFwuYnxnMXxzaSl8dXRzdHx2NDAwfHY3NTB8dmVyaXx2aShyZ3x0ZSl8dmsoNDB8NVswLTNdfFxcLXYpfHZtNDB8dm9kYXx2dWxjfHZ4KDUyfDUzfDYwfDYxfDcwfDgwfDgxfDgzfDg1fDk4KXx3M2MoXFwtfCApfHdlYmN8d2hpdHx3aShnIHxuY3xudyl8d21sYnx3b251fHg3MDB8eWFzXFwtfHlvdXJ8emV0b3x6dGVcXC0vaS50ZXN0KFxyXG4gICAgYnJvd3NlckFnZW50LnN1YnN0cigwLCA0KVxyXG4gIClcclxuKSB7XHJcbiAgdGltZXJJbnB1dC50eXBlID0gXCJudW1iZXJcIjtcclxufVxyXG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=